# 매장 관리 프로그램 프로젝트 개발 문서

## 1. 개요

### 1.1 프로젝트 설명

**프로젝트 이름**: 매장 관리 프로그램

**목적**: 소규모 사업장에서 상품 및 재고를 효율적으로 관리하기 위해 제작

**주요 기능**:
- 로그인/회원가입
- 관리자 메뉴 (관리자 전용)
- 재료 및 상품 등록
- 직원 정보 관리 및 급여 지급
- 재고 관리 및 재료 주문
- 판매 기능 (포스기 스타일)
- 다양한 보고서 생성

**개발 환경 및 사용 기술**:
- Java Development Kit (JDK) 17
- Oracle Database

### 1.2 시스템 아키텍처

```plaintext
+---------------------------+
|       UI Layer            |
|---------------------------|
| LoginUI, InventoryUI,     |
| SalesUI, ManagerUI,       |
| ProductManagementUI       |
+---------------------------+
             ↓
+---------------------------+
|     Service Layer         |
|---------------------------|
| CategoryDAO, EmployeeDAO, |
| IngredientDAO, MenuDAO,   |
| ReportDAO                 |
+---------------------------+
             ↓
+---------------------------+
|      Model Layer          |
|---------------------------|
| Category, Employee,       |
| Ingredient, Order,        |
| Product, Stock            |
+---------------------------+
             ↓
+---------------------------+
|    Database Layer         |
|---------------------------|
| DatabaseService,          |
| DBConnection              |
+---------------------------+
```

### 1.3 데이터베이스 설계

#### ERD 다이어그램

```mermaid
erDiagram
    Roles ||--o{ Employees : "has"
    Employees ||--o{ Salaries : "receives"
    Ingredient_Categories ||--o{ Ingredients : "contains"
    Ingredients ||--o{ Stock : "tracks"
    Ingredients ||--o{ Orders : "orders"
    Ingredients ||--o{ Product_Ingredients : "used_in"
    Product_Categories ||--o{ Products : "categorizes"
    Products ||--o{ Product_Ingredients : "requires"
    Products ||--o{ Sales : "sold"
    Products ||--o{ Menu : "displays"

    Roles {
        number role_id PK
        string role_name
    }
    Employees {
        number employee_id PK
        string username
        string name
        string contact
        date hire_date
        number role_id FK
    }
    Salaries {
        number salary_id PK
        number employee_id FK
        date payment_date
        number payment_amount
        string payment_type
    }
    Ingredient_Categories {
        number category_id PK
        string category_name
    }
    Ingredients {
        number ingredient_id PK
        number category_id FK
        string name
        number unit_price
        string unit
    }
    Stock {
        number ingredient_id PK
        number current_stock
    }
    Orders {
        number order_id PK
        number ingredient_id FK
        string supplier
        date order_date
        number quantity
        number total_price
    }
    Product_Categories {
        number category_id PK
        string category_name
    }
    Products {
        number product_id PK
        number category_id FK
        string name
        number price
        number cost_price
    }
    Sales {
        number sale_id PK
        number product_id FK
        date sale_date
        number quantity
        number total_price
    }
    Product_Ingredients {
        number product_id FK
        number ingredient_id FK
        number required_amount
    }
    Menu {
        number menu_id PK
        number product_id FK
        number display_order
        string is_visible
    }
```

#### 엔터티 관계 설명

1. **Roles - Employees**
   - 각 직원은 특정 역할(Role)에 속함
   - 하나의 역할은 여러 직원을 가질 수 있음

2. **Employees - Salaries**
   - 각 직원은 여러 번의 급여를 받을 수 있음
   - 급여 정보는 직원과 연결됨

3. **Ingredient_Categories - Ingredients**
   - 재료는 특정 카테고리에 속함
   - 하나의 카테고리는 여러 재료를 포함할 수 있음

4. **Ingredients - Stock**
   - 각 재료의 현재 재고 추적
   - 1:1 관계

5. **Ingredients - Orders**
   - 재료 주문 관리
   - 하나의 재료는 여러 번 주문될 수 있음

6. **Products - Product_Ingredients**
   - 상품은 여러 재료를 필요로 함
   - 상품과 재료 간 다대다 관계

7. **Product_Categories - Products**
   - 각 상품은 특정 카테고리에 속함
   - 하나의 카테고리는 여러 상품을 포함할 수 있음

8. **Products - Sales**
   - 상품 판매 기록 관리
   - 하나의 상품은 여러 번 판매될 수 있음

9. **Products - Menu**
   - 메뉴에 표시될 상품 관리
   - 상품의 메뉴 노출 여부 및 순서 결정

## 2. 작업 진행

### 2.1 변경 사항

**초기 기획 대비 제거된 기능**:
- 출퇴근 기록
- 직원 정보 조회
- 휴가 승인 및 근태 관리
- 이벤트 및 할인 적용
- 재고 알람 시스템
- 로그인 실패 처리 및 계정 잠금

**접근 제한 로직 변경**:
- 로그인 시 직급에 따른 메뉴 접근 제어
- 특정 직급만 관리자 메뉴 접근 가능

### 2.2 작업 방식의 문제점 및 개선 방향

- 초기 자동화 설계의 복잡성 감소
- 코드 구조 단순화
- 팀원 학습 곡선을 고려한 기술 선택
- 유지보수성 향상을 위한 아키텍처 개선

## 3. 프로젝트 진행 중 발생한 문제 및 해결

### 3.1 주요 문제점 및 해결 과정

#### UI/UX 문제
- **문제**: 판매 화면의 상품 추가 및 수량 입력 방식 어려움
- **해결**: 
  - 상품 클릭 시 입력 필드 초기화 로직 추가
  - 스크롤 가능한 상품 버튼 레이아웃 구현

#### 데이터베이스 설계 문제
- **문제**: 복잡한 데이터베이스 자동 설정 및 손익 계산서 처리
- **해결**:
  - 수동 SQL 스크립트로 전환
  - 손익 계산서 테이블 단순화
  - 시퀀스 및 트리거 최적화

#### 보고서 및 데이터 조회 문제
- **문제**: 다중 테이블 간 데이터 조회의 비효율성
- **해결**:
  - SQL 쿼리 최적화
  - 월별 손익 계산서 조회 UI 추가

#### 협업 및 코드 구조 문제
- **문제**: 복잡한 코드 구조와 유지보수성 저하
- **해결**:
  - `Service` 클래스 통합
  - DAO와 UI 계층 분리
  - 새로운 라이브러리 도입 최소화

### 3.2 향후 개선 방안

- 코드 구조의 지속적인 리팩토링
- 팀원 간 기술 공유 및 학습 프로세스 개선
- 확장성을 고려한 아키텍처 설계

## 4. 협업

### 4.1 협업 방식

- 정기적인 팀 미팅
- 명확한 작업 분담
- 코드 리뷰 프로세스 수립

### 4.2 협업의 어려움

- 초기 기술 이해도 차이
- 코드 스타일 및 접근 방식의 불일치

### 4.3 향후 협업 개선 방향

- 표준화된 코딩 가이드라인 수립
- 지속적인 기술 학습 및 공유
- 효과적인 의사소통 채널 유지

---

**비고**: 이 문서는 매장 관리 프로그램 개발 과정의 초안으로, 지속적인 업데이트와 개선이 필요합니다.
